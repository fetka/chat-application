<!DOCTYPE html>
<html>
<head>
  <title>Chat Application</title>
  <script>
    const socket = new WebSocket("ws://localhost:8080/chat");
<!--    socket.onmessage = function(event) {-->
<!--        let message = JSON.parse(event.data);-->
<!--        displayMessage(event);-->
<!--    };-->
socket.onmessage =  (event) => {
 console.log("onmessage", event.data);
 let message = JSON.parse(event.data);
        displayMessage(message);
};

socket.onopen = (event) => {
console.log("onopen", event);
};


    function sendMessage() {
        let messageContent = document.getElementById("message").value;
        let message = {
            sender: "User",
            content: messageContent
        };
        socket.send(JSON.stringify(message));
        console.log(message);

        document.getElementById("message").value = '';
    }

    function displayMessage(message) {
        let messageElement = document.createElement('div');
        messageElement.textContent = `${message.sender}: ${message.content}`;
        document.getElementById('messages').appendChild(messageElement);
    }
  </script>
</head>
<body>
<h1>Chat Application</h1>
<div id="messages"></div>
<input type="text" id="message" placeholder="Enter your message">
<button onclick="sendMessage()">Send</button>
</body>
</html>